cstr ban(vs <: vm, ns <: node ) ::=
    """ {"id":"ban", "vms":[@vs], "nodes":[@ns]} """
    !(v : vs) vmState(v) = running --> host(v) /: ns

cstr cumulatedRunningcapacity(ns <: node, nb : nat) ::=
        """{"id":"cumulatedRunningcapa","nodes":@ns,"continuous":false,"amount":@nb} """
    	card({hosted(i). i : ns}) <= nb

cstr fence(vs <: vm, ns <: node ) ::=
    """ {"id":"fence", "vms":[@vs], "nodes":[@ns]} """
    !(v : vs) vmState(v) = running --> host(v) : ns

cstr gather(vs <: vm) ::=
    """ {"id":"gather",  "vms":[@vs], "continuous": false} """
    !(x,y : vs)  (x /= y & vmState(x) = running & vmState(y) = running) --> host(x) = host(y)

cstr lonely (vs <: vm) ::=
    """ {"id":"lonely", "vms":@vs, "continuous" : false} """
	!(i : vs) vmState(i) = running --> (colocated(i) - {i}) /<: vs

cstr offline(ns <: node) ::=
    """ {"id":"offline",  "nodes":@n} """
    !(n : ns) nodeState(n) = offline --> card(hosted(n)) = 0

cstr online(ns <: node) ::=
    """ {"id": "online", "nodes": @n} """
    !(n : ns) nodeState(n) = online

cstr running(vs <: vm) ::=
    """ {"id": "running", "vms": @vs} """
    !(v : vs) vmState(v) = running --> (host(v) : node & nodeState(host(v)) = online)

cstr ready(vs <: vm) ::=
    """ {"id": "ready", "vms": @vs} """
    !(v : vs) vmState(v) = ready --> host(v) /: node

cstr sleeping(vs <: vm) ::= 
    """ {"id": "sleeping", "vms": @vs} """
    !(v : vs) vmState(v) = sleeping --> (host(v) : node & nodeState(host(v)) = online)

cstr terminated(vs <: vm) ::=
    """ {"id": "terminated", "vms": @vs} """
    !(v : vs) vmState(v) = terminated --> host(v) /: node

cstr root (vs <: vm) ::=
    """ {"id":"root", "vms":@vs} """
    !(v : vs) vmState(v) = running --> $host(v) = host(v)

cstr singleRunningcapacity(ns <: node, nb : nat) ::=
    """{"id":"singleRunningcapa","nodes":@ns,"continuous":false,"amount":@nb} """
	!(n : ns) card(hosted(n)) <= nb

cstr spread(vs <: vm) ::=
    """ {"id":"spread",  "vms":@vs, "continuous": false} """
     !(x,y : vs) (x /= y &  vmState(x) = running & vmState(y) = running) --> host(x) /= host(y)

cstr quarantine(ns <: node) ::=
    """ {"id":"quarantine",  "ns":@ns, "continuous": false} """
     !(n : ns) !(v : hosted(n)) root(v) & ban({hosted(n2). n2 /: ns}, ns)

/*cstr maxOnline(ns <: node, nb : nat) ::=
    """ {"id":"maxOnline","nodes":[@ns],"amount":@nb,"continuous":false} """
	card({i. i : ns. nodeState(i) = online}) <= nb

cstr among (vs <: vm, groups <: P(node)) ::=
    """ {"id":"among", "nodes":@ns, "continuous" : false} """
    ?(g : groups) {host(i). i : vs & vmState(i) = running} : g

cstr split(vs <: P(vm)) ::=

cstr splitAmong(vs <: P(vm), ns <: P(node)) ::=
*/
cstr preserve(vs <: vm, id : string, qty: nat) ::=
    """ {"id": "preserve", "vms": @vs, "rc":@id, "amount":@qty} """
    !(v : vs) vmState(v) = running --> cons(v, id) <= qty

cstr singleResourcecapacity(ns <: node, id : string, qty: nat) ::=
    """ {"id": "singleResourcecapacity", "nodes": @ns, "rc":@id, "amount":@qty} """
    !(n : ns) nodeState(n) = online --> capa(n, id) <= qty

/*
cstr overbook(ns <: node, id : string, qty: real) ::=
    """ {"id": "overbook", "nodes": @ns, "rc":@id, "amount":@qty} """


cstr cumulatedResourcecapacity(ns <: node, id : string, qty: nat) ::=
    """ {"id": "cumulatedResourcecapacity", "nodes": @ns, "rc":@id, "amount":@qty} """
*/